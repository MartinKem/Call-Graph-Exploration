<!DOCTYPE html>
<html>
<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width">
    <script src='http://d3js.org/d3.v3.min.js'></script>
    <script src="Edges.js"></script>
    <script src="nodes.js"></script>
	<script src='ForceTree.js'></script>
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>

    <link href="style.css" rel="stylesheet" type="text/css">
    <title>D3 Graph</title>
	<style>

		circle {
		  stroke-width: 3px;
		}

		line {
			stroke: #d8a806;
			stroke-width: 5px;
		}

	</style>
</head>
<body>
<button id="btn" onclick="open_close()">Hide Details</button>
<div id='graph' style="position: relative; font-family: Helvetica"></div>

<script>
    var svgCont = d3.select("#graph")
        .append("svg")
		.attr("width", 4000)
		.attr("height", 4000);
		
	svgCont.append("defs").attr("id", "definitions");
	
    var vis = svgCont.append("foreignObject").attr("width", 4000).attr("height", 4000).attr("position","relative");
	
	
	var fill = d3.scale.category20();
	links = [];
	
	nodes = [
		{index: 0, x: svgCont.attr('width')/2, y: svgCont.attr('height')/2, fixed: true, id: "0"}
	];
			  
	[force, nodeSelection, linkSelection] = initForce(svgCont, nodes, links);
	
	let testNode = new node(0, -1, vis, "TestNode", ["Foo.<init>","Bar.<init>","Foo.m","String.toString"]);
	let childNode = testNode.addChild(1, 0, "ChildNode", ["Foo.<init>", "String.toString"]);
	let childNode2 = testNode.addChild(1, 2, "TestNode", ["Foo.<init>", "String.toString"]);
	let secondChild = testNode.addChild(2, 0, "SecondChild", ["Foo.<init>", "String.toString"]);
	let circle1 = secondChild.addChild(0, 0, "TestNode", ["Foo.<init>", "String.toString"]);
	let childchildNode = childNode.addChild(3, 1, "ChildChildNode", ["foobar.m","something.anything","hello.world"]);
	let circle = childNode.addChild(3, 1, "SecondChild", ["foobar.m","something.anything","hello.world"]);
	let testNode1 = childchildNode.addChild(4, 2, "testNode1", ["Foo.<init>","Bar.<init>","Foo.m","String.toString"]);
	let testNode2 = childchildNode.addChild(5, 2, "testNode2", ["foobar.m","something.anything","hello.world"]);
	testNode.showNode();
	/*testNode.showChildNodes(0);
	childNode.showChildNodes(1);
	childchildNode.showChildNodes(2);*/

</script>
<script>
    var i = 0;
    function open_close() {
        if (i===0){
            d3.selectAll(".node_inhalt").style("display","none");
			d3.selectAll(".edge").each(function(){
				var id = d3.select(this).attr("id");
				toggleToAbstract(id);
			});
            // d3.selectAll(".node_inhalt").style("visibility","hidden");
            document.getElementById("btn").innerText = "Ausklappen";
            i++;
        }else {

            // d3.selectAll(".node_inhalt").style("visibility","visible");
            d3.selectAll(".node_inhalt").style("display","block");
			d3.selectAll(".edge").each(function(){
				var id = d3.select(this).attr("id");
				toggleToDetailed(id);
			});
            document.getElementById("btn").innerText = "Einklappen";
            i=0;
        }
        return;
    }
</script>
<script src="rightclickmenu.js"></script>
</body>
</html>